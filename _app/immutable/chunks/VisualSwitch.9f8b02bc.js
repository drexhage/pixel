import{S as H,i as J,s as Z,F as yt,k as A,a as Ce,Z as Re,l as z,h as p,c as Oe,n as d,C as et,b as E,G as mt,H as vt,I as kt,g as I,d as L,E as nt,_ as y,m as D,D as C,e as _t,v as Mt,f as Ft,P as Be,N as Nt,y as Vt,z as qt,A as Kt,B as Gt,J as Pe,$ as rt,a0 as We,K as Me,O as Fe}from"./index.c219bad8.js";import{w as h,b as Ht}from"./paths.065d899a.js";let Jt,ot,xt,it,$t,Zt,Qt,Xt,Q,At,Yt,zt,S,St,te,ee,Et,Tt,It,st,Lt,at,Dt,ct,bt,X,gt,lt,ne,ut,jt,Ut,Ne=(async()=>{ot=(n=>(n.Light="light",n.Dark="dark",n.System="system",n))(ot||{});let Ct,Rt;Ct=()=>localStorage.getItem("theme")==="light"?"light":"dark",Rt=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,Q=h(Ct()),Q.subscribe(n=>{localStorage.setItem("theme",n)}),At=h(!Rt()),te=()=>{Q.update(n=>{switch(n){case"light":return"dark";case"dark":case"system":return"light"}})};function re(n){let t,e,_,r,o;const i=n[4].default,b=yt(i,n,n[3],null);return{c(){t=A("meta"),e=A("link"),r=Ce(),b&&b.c(),this.h()},l(a){const l=Re("svelte-1jzj7rs",document.head);t=z(l,"META",{name:!0,content:!0}),e=z(l,"LINK",{rel:!0,href:!0}),l.forEach(p),r=Oe(a),b&&b.l(a),this.h()},h(){d(t,"name","color-scheme"),d(t,"content",n[0]),d(e,"rel","stylesheet"),d(e,"href",_=`${Ht}/theme/${n[1]}.css`)},m(a,l){et(document.head,t),et(document.head,e),E(a,r,l),b&&b.m(a,l),o=!0},p(a,[l]){(!o||l&1)&&d(t,"content",a[0]),(!o||l&2&&_!==(_=`${Ht}/theme/${a[1]}.css`))&&d(e,"href",_),b&&b.p&&(!o||l&8)&&mt(b,i,a,a[3],o?kt(i,a[3],l,null):vt(a[3]),null)},i(a){o||(I(b,a),o=!0)},o(a){L(b,a),o=!1},d(a){p(t),p(e),a&&p(r),b&&b.d(a)}}}function oe(n,t,e){let _,r;nt(n,Q,a=>e(0,_=a)),nt(n,At,a=>e(2,r=a));let{$$slots:o={},$$scope:i}=t,b="light";return n.$$set=a=>{"$$scope"in a&&e(3,i=a.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&e(1,b=_===ot.System?r?"light":"dark":_)},[_,b,r,i,o]}Xt=class extends H{constructor(n){super(),J(this,n,oe,re,Z,{})}};let c;const T=new Array(128).fill(void 0);T.push(void 0,null,!0,!1);function s(n){return T[n]}let P=T.length;function ie(n){n<132||(T[n]=P,P=n)}function m(n){const t=s(n);return ie(n),t}let j=0,W=null;function M(){return(W===null||W.byteLength===0)&&(W=new Uint8Array(c.memory.buffer)),W}const Y=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},se=typeof Y.encodeInto=="function"?function(n,t){return Y.encodeInto(n,t)}:function(n,t){const e=Y.encode(n);return t.set(e),{read:n.length,written:e.length}};function R(n,t,e){if(e===void 0){const b=Y.encode(n),a=t(b.length,1)>>>0;return M().subarray(a,a+b.length).set(b),j=b.length,a}let _=n.length,r=t(_,1)>>>0;const o=M();let i=0;for(;i<_;i++){const b=n.charCodeAt(i);if(b>127)break;o[r+i]=b}if(i!==_){i!==0&&(n=n.slice(i)),r=e(r,_,_=i+n.length*3,1)>>>0;const b=M().subarray(r+i,r+_),a=se(n,b);i+=a.written}return j=i,r}function k(n){return n==null}let F=null;function g(){return(F===null||F.byteLength===0)&&(F=new Int32Array(c.memory.buffer)),F}function u(n){P===T.length&&T.push(T.length+1);const t=P;return P=T[t],T[t]=n,t}let N=null;function ae(){return(N===null||N.byteLength===0)&&(N=new Float64Array(c.memory.buffer)),N}const Ot=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ot.decode();function x(n,t){return n=n>>>0,Ot.decode(M().subarray(n,n+t))}let V=null;function ce(){return(V===null||V.byteLength===0)&&(V=new BigInt64Array(c.memory.buffer)),V}function ft(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(t=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let o="[";r>0&&(o+=ft(n[0]));for(let i=1;i<r;i++)o+=", "+ft(n[i]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let _;if(e.length>1)_=e[1];else return toString.call(n);if(_=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:_}function be(n,t){return n=n>>>0,M().subarray(n/1,n/1+t)}function $(n,t){try{return n.apply(this,t)}catch(e){c.__wbindgen_exn_store(u(e))}}let q=null;function ge(){return(q===null||q.byteLength===0)&&(q=new Uint8ClampedArray(c.memory.buffer)),q}function le(n,t){return n=n>>>0,ge().subarray(n/1,n/1+t)}class O{static __wrap(t){t=t>>>0;const e=Object.create(O.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();c.__wbg_engine_free(t)}constructor(t,e){const _=c.engine__new(t,e);return O.__wrap(_)}static reconstruct(t,e){try{const i=c.__wbindgen_add_to_stack_pointer(-16);c.engine_reconstruct(i,t,u(e));var _=g()[i/4+0],r=g()[i/4+1],o=g()[i/4+2];if(o)throw m(r);return O.__wrap(_)}finally{c.__wbindgen_add_to_stack_pointer(16)}}perform_step(t){try{const i=c.__wbindgen_add_to_stack_pointer(-16);c.engine_perform_step(i,this.__wbg_ptr,u(t));var e=g()[i/4+0],_=g()[i/4+1],r=g()[i/4+2],o=g()[i/4+3];if(o)throw m(r);return e===0?void 0:_>>>0}finally{c.__wbindgen_add_to_stack_pointer(16)}}get pointer(){return c.engine_pointer(this.__wbg_ptr)>>>0}start_step(t){try{const i=c.__wbindgen_add_to_stack_pointer(-16);c.engine_start_step(i,this.__wbg_ptr,u(t));var e=g()[i/4+0],_=g()[i/4+1],r=g()[i/4+2],o=g()[i/4+3];if(o)throw m(r);return e===0?void 0:_>>>0}finally{c.__wbindgen_add_to_stack_pointer(16)}}extend_step(t,e){try{const b=c.__wbindgen_add_to_stack_pointer(-16);c.engine_extend_step(b,this.__wbg_ptr,t,e);var _=g()[b/4+0],r=g()[b/4+1],o=g()[b/4+2],i=g()[b/4+3];if(i)throw m(o);return _===0?void 0:r>>>0}finally{c.__wbindgen_add_to_stack_pointer(16)}}finish_step(){try{const o=c.__wbindgen_add_to_stack_pointer(-16);c.engine_finish_step(o,this.__wbg_ptr);var t=g()[o/4+0],e=g()[o/4+1],_=g()[o/4+2],r=g()[o/4+3];if(r)throw m(_);return t===0?void 0:e>>>0}finally{c.__wbindgen_add_to_stack_pointer(16)}}undo(){try{const _=c.__wbindgen_add_to_stack_pointer(-16);c.engine_undo(_,this.__wbg_ptr);var t=g()[_/4+0],e=g()[_/4+1];if(e)throw m(t)}finally{c.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const _=c.__wbindgen_add_to_stack_pointer(-16);c.engine_redo(_,this.__wbg_ptr);var t=g()[_/4+0],e=g()[_/4+1];if(e)throw m(t)}finally{c.__wbindgen_add_to_stack_pointer(16)}}get_first_hit(t,e){try{const o=c.__wbindgen_add_to_stack_pointer(-16);c.engine_get_first_hit(o,this.__wbg_ptr,t,e);var _=g()[o/4+0],r=g()[o/4+1];return _===0?void 0:r>>>0}finally{c.__wbindgen_add_to_stack_pointer(16)}}move_layer_up(t){try{const r=c.__wbindgen_add_to_stack_pointer(-16);c.engine_move_layer_up(r,this.__wbg_ptr,t);var e=g()[r/4+0],_=g()[r/4+1];if(_)throw m(e)}finally{c.__wbindgen_add_to_stack_pointer(16)}}move_layer_down(t){try{const r=c.__wbindgen_add_to_stack_pointer(-16);c.engine_move_layer_down(r,this.__wbg_ptr,t);var e=g()[r/4+0],_=g()[r/4+1];if(_)throw m(e)}finally{c.__wbindgen_add_to_stack_pointer(16)}}switch_blender(t){try{const r=c.__wbindgen_add_to_stack_pointer(-16),o=R(t,c.__wbindgen_malloc,c.__wbindgen_realloc),i=j;c.engine_switch_blender(r,this.__wbg_ptr,o,i);var e=g()[r/4+0],_=g()[r/4+1];if(_)throw m(e)}finally{c.__wbindgen_add_to_stack_pointer(16)}}get current(){return c.engine_current(this.__wbg_ptr)>>>0}get context_idx(){try{const _=c.__wbindgen_add_to_stack_pointer(-16);c.engine_context_idx(_,this.__wbg_ptr);var t=g()[_/4+0],e=g()[_/4+1];return t===0?void 0:e>>>0}finally{c.__wbindgen_add_to_stack_pointer(16)}}get content(){try{const r=c.__wbindgen_add_to_stack_pointer(-16);c.engine_content(r,this.__wbg_ptr);var t=g()[r/4+0],e=g()[r/4+1],_=g()[r/4+2];if(_)throw m(e);return m(t)}finally{c.__wbindgen_add_to_stack_pointer(16)}}get history(){try{const r=c.__wbindgen_add_to_stack_pointer(-16);c.engine_history(r,this.__wbg_ptr);var t=g()[r/4+0],e=g()[r/4+1],_=g()[r/4+2];if(_)throw m(e);return m(t)}finally{c.__wbindgen_add_to_stack_pointer(16)}}get undoable(){return c.engine_undoable(this.__wbg_ptr)!==0}get redoable(){return c.engine_redoable(this.__wbg_ptr)!==0}get version(){let t,e;try{const o=c.__wbindgen_add_to_stack_pointer(-16);c.engine_version(o,this.__wbg_ptr);var _=g()[o/4+0],r=g()[o/4+1];return t=_,e=r,x(_,r)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(t,e,1)}}get size(){const t=c.engine_size(this.__wbg_ptr);return ue.__wrap(t)}get blender(){let t,e;try{const o=c.__wbindgen_add_to_stack_pointer(-16);c.engine_blender(o,this.__wbg_ptr);var _=g()[o/4+0],r=g()[o/4+1];return t=_,e=r,x(_,r)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(t,e,1)}}}class wt{static __wrap(t){t=t>>>0;const e=Object.create(wt.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();c.__wbg_engineerror_free(t)}get is_user_error(){return c.engineerror_is_user_error(this.__wbg_ptr)!==0}get reason(){let t,e;try{const o=c.__wbindgen_add_to_stack_pointer(-16);c.engineerror_reason(o,this.__wbg_ptr);var _=g()[o/4+0],r=g()[o/4+1];return t=_,e=r,x(_,r)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(t,e,1)}}}let ue=class _e{static __wrap(t){t=t>>>0;const e=Object.create(_e.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();c.__wbg_size_free(t)}get width(){return c.__wbg_get_size_width(this.__wbg_ptr)>>>0}set width(t){c.__wbg_set_size_width(this.__wbg_ptr,t)}get height(){return c.__wbg_get_size_height(this.__wbg_ptr)>>>0}set height(t){c.__wbg_set_size_height(this.__wbg_ptr,t)}};async function fe(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(_){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function we(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(t){m(t)},n.wbg.__wbindgen_string_get=function(t,e){const _=s(e),r=typeof _=="string"?_:void 0;var o=k(r)?0:R(r,c.__wbindgen_malloc,c.__wbindgen_realloc),i=j;g()[t/4+1]=i,g()[t/4+0]=o},n.wbg.__wbindgen_boolean_get=function(t){const e=s(t);return typeof e=="boolean"?e?1:0:2},n.wbg.__wbindgen_is_bigint=function(t){return typeof s(t)=="bigint"},n.wbg.__wbindgen_bigint_from_i64=function(t){return u(t)},n.wbg.__wbindgen_jsval_eq=function(t,e){return s(t)===s(e)},n.wbg.__wbindgen_bigint_from_u64=function(t){const e=BigInt.asUintN(64,t);return u(e)},n.wbg.__wbindgen_number_get=function(t,e){const _=s(e),r=typeof _=="number"?_:void 0;ae()[t/8+1]=k(r)?0:r,g()[t/4+0]=!k(r)},n.wbg.__wbindgen_is_object=function(t){const e=s(t);return typeof e=="object"&&e!==null},n.wbg.__wbindgen_in=function(t,e){return s(t)in s(e)},n.wbg.__wbindgen_is_undefined=function(t){return s(t)===void 0},n.wbg.__wbindgen_error_new=function(t,e){const _=new Error(x(t,e));return u(_)},n.wbg.__wbg_engineerror_new=function(t){const e=wt.__wrap(t);return u(e)},n.wbg.__wbindgen_string_new=function(t,e){const _=x(t,e);return u(_)},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return u(t)},n.wbg.__wbg_stack_658279fe44541cf6=function(t,e){const _=s(e).stack,r=R(_,c.__wbindgen_malloc,c.__wbindgen_realloc),o=j;g()[t/4+1]=o,g()[t/4+0]=r},n.wbg.__wbg_error_f851667af71bcfc6=function(t,e){let _,r;try{_=t,r=e,console.error(x(t,e))}finally{c.__wbindgen_free(_,r,1)}},n.wbg.__wbindgen_object_clone_ref=function(t){const e=s(t);return u(e)},n.wbg.__wbindgen_jsval_loose_eq=function(t,e){return s(t)==s(e)},n.wbg.__wbindgen_number_new=function(t){return u(t)},n.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(t,e){const _=s(t)[s(e)];return u(_)},n.wbg.__wbg_set_841ac57cff3d672b=function(t,e,_){s(t)[m(e)]=m(_)},n.wbg.__wbg_instanceof_WebGl2RenderingContext_f921526c513bf717=function(t){let e;try{e=s(t)instanceof WebGL2RenderingContext}catch{e=!1}return e},n.wbg.__wbg_bufferData_21334671c4ba6004=function(t,e,_,r){s(t).bufferData(e>>>0,s(_),r>>>0)},n.wbg.__wbg_readPixels_bff4bcf8c4438673=function(){return $(function(t,e,_,r,o,i,b,a,l){s(t).readPixels(e,_,r,o,i>>>0,b>>>0,a===0?void 0:be(a,l))},arguments)},n.wbg.__wbg_texImage2D_ee92e9b9fd506f92=function(){return $(function(t,e,_,r,o,i,b){s(t).texImage2D(e>>>0,_,r,o>>>0,i>>>0,s(b))},arguments)},n.wbg.__wbg_activeTexture_799bf1387e911c27=function(t,e){s(t).activeTexture(e>>>0)},n.wbg.__wbg_attachShader_47256b6b3d42a22e=function(t,e,_){s(t).attachShader(s(e),s(_))},n.wbg.__wbg_bindBuffer_24f6010e273fa400=function(t,e,_){s(t).bindBuffer(e>>>0,s(_))},n.wbg.__wbg_bindFramebuffer_a9573e340dab20fe=function(t,e,_){s(t).bindFramebuffer(e>>>0,s(_))},n.wbg.__wbg_bindTexture_92d6d7f8bff9531e=function(t,e,_){s(t).bindTexture(e>>>0,s(_))},n.wbg.__wbg_clear_2db2efe323bfdf68=function(t,e){s(t).clear(e>>>0)},n.wbg.__wbg_clearColor_7a7d04702f7e38e5=function(t,e,_,r,o){s(t).clearColor(e,_,r,o)},n.wbg.__wbg_compileShader_6bf78b425d5c98e1=function(t,e){s(t).compileShader(s(e))},n.wbg.__wbg_createBuffer_323425af422748ac=function(t){const e=s(t).createBuffer();return k(e)?0:u(e)},n.wbg.__wbg_createFramebuffer_1684a99697ac9563=function(t){const e=s(t).createFramebuffer();return k(e)?0:u(e)},n.wbg.__wbg_createProgram_4eaf3b97b5747a62=function(t){const e=s(t).createProgram();return k(e)?0:u(e)},n.wbg.__wbg_createShader_429776c9dd6fb87b=function(t,e){const _=s(t).createShader(e>>>0);return k(_)?0:u(_)},n.wbg.__wbg_createTexture_1bf4d6fec570124b=function(t){const e=s(t).createTexture();return k(e)?0:u(e)},n.wbg.__wbg_drawArrays_c91ce3f736bf1f2a=function(t,e,_,r){s(t).drawArrays(e>>>0,_,r)},n.wbg.__wbg_enableVertexAttribArray_8804480c2ea0bb72=function(t,e){s(t).enableVertexAttribArray(e>>>0)},n.wbg.__wbg_framebufferTexture2D_e88fcbd7f8523bb8=function(t,e,_,r,o,i){s(t).framebufferTexture2D(e>>>0,_>>>0,r>>>0,s(o),i)},n.wbg.__wbg_getAttribLocation_7dbdbad935433494=function(t,e,_,r){return s(t).getAttribLocation(s(e),x(_,r))},n.wbg.__wbg_getProgramInfoLog_b81bc53188e286fa=function(t,e,_){const r=s(e).getProgramInfoLog(s(_));var o=k(r)?0:R(r,c.__wbindgen_malloc,c.__wbindgen_realloc),i=j;g()[t/4+1]=i,g()[t/4+0]=o},n.wbg.__wbg_getProgramParameter_35522a0bfdfaad27=function(t,e,_){const r=s(t).getProgramParameter(s(e),_>>>0);return u(r)},n.wbg.__wbg_getShaderInfoLog_968b93e75477d725=function(t,e,_){const r=s(e).getShaderInfoLog(s(_));var o=k(r)?0:R(r,c.__wbindgen_malloc,c.__wbindgen_realloc),i=j;g()[t/4+1]=i,g()[t/4+0]=o},n.wbg.__wbg_getShaderParameter_ac2727ae4fe7648e=function(t,e,_){const r=s(t).getShaderParameter(s(e),_>>>0);return u(r)},n.wbg.__wbg_getUniformLocation_9f6eb60c560a347b=function(t,e,_,r){const o=s(t).getUniformLocation(s(e),x(_,r));return k(o)?0:u(o)},n.wbg.__wbg_linkProgram_33998194075d71fb=function(t,e){s(t).linkProgram(s(e))},n.wbg.__wbg_shaderSource_1cb7c64dc7d1a500=function(t,e,_,r){s(t).shaderSource(s(e),x(_,r))},n.wbg.__wbg_texParameteri_85dad939f62a15aa=function(t,e,_,r){s(t).texParameteri(e>>>0,_>>>0,r)},n.wbg.__wbg_uniform1f_88379f4e2630bc66=function(t,e,_){s(t).uniform1f(s(e),_)},n.wbg.__wbg_uniform1i_d2e61a6a43889648=function(t,e,_){s(t).uniform1i(s(e),_)},n.wbg.__wbg_uniform2f_b6e484a1302ea599=function(t,e,_,r){s(t).uniform2f(s(e),_,r)},n.wbg.__wbg_useProgram_3683cf6f60939dcd=function(t,e){s(t).useProgram(s(e))},n.wbg.__wbg_vertexAttribPointer_316ffe2f0458fde7=function(t,e,_,r,o,i,b){s(t).vertexAttribPointer(e>>>0,_,r>>>0,o!==0,i,b)},n.wbg.__wbg_viewport_fad1ce9e18f741c0=function(t,e,_,r,o){s(t).viewport(e,_,r,o)},n.wbg.__wbg_createElement_4891554b28d3388b=function(){return $(function(t,e,_){const r=s(t).createElement(x(e,_));return u(r)},arguments)},n.wbg.__wbg_instanceof_Window_9029196b662bc42a=function(t){let e;try{e=s(t)instanceof Window}catch{e=!1}return e},n.wbg.__wbg_document_f7ace2b956f30a4f=function(t){const e=s(t).document;return k(e)?0:u(e)},n.wbg.__wbg_debug_9b8701f894da9929=function(t,e,_,r){console.debug(s(t),s(e),s(_),s(r))},n.wbg.__wbg_error_d9bce418caafb712=function(t,e,_,r){console.error(s(t),s(e),s(_),s(r))},n.wbg.__wbg_info_bb52f40b06f679de=function(t,e,_,r){console.info(s(t),s(e),s(_),s(r))},n.wbg.__wbg_log_ea7093e35e3efd07=function(t,e,_,r){console.log(s(t),s(e),s(_),s(r))},n.wbg.__wbg_warn_dfc0e0cf544a13bd=function(t,e,_,r){console.warn(s(t),s(e),s(_),s(r))},n.wbg.__wbg_newwithu8clampedarrayandsh_e2b3fce567acd708=function(){return $(function(t,e,_,r){const o=new ImageData(le(t,e),_>>>0,r>>>0);return u(o)},arguments)},n.wbg.__wbg_instanceof_HtmlCanvasElement_da5f9efa0688cf6d=function(t){let e;try{e=s(t)instanceof HTMLCanvasElement}catch{e=!1}return e},n.wbg.__wbg_setwidth_a667a942dba6656e=function(t,e){s(t).width=e>>>0},n.wbg.__wbg_setheight_a747d440760fe5aa=function(t,e){s(t).height=e>>>0},n.wbg.__wbg_getContext_6d1f155bb5c1096a=function(){return $(function(t,e,_,r){const o=s(t).getContext(x(e,_),s(r));return k(o)?0:u(o)},arguments)},n.wbg.__wbg_get_44be0491f933a435=function(t,e){const _=s(t)[e>>>0];return u(_)},n.wbg.__wbg_length_fff51ee6522a1a18=function(t){return s(t).length},n.wbg.__wbg_new_898a68150f225f2e=function(){const t=new Array;return u(t)},n.wbg.__wbindgen_is_function=function(t){return typeof s(t)=="function"},n.wbg.__wbg_newnoargs_581967eacc0e2604=function(t,e){const _=new Function(x(t,e));return u(_)},n.wbg.__wbg_new_56693dbed0c32988=function(){return u(new Map)},n.wbg.__wbg_next_526fc47e980da008=function(t){const e=s(t).next;return u(e)},n.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return $(function(t){const e=s(t).next();return u(e)},arguments)},n.wbg.__wbg_done_5c1f01fb660d73b5=function(t){return s(t).done},n.wbg.__wbg_value_1695675138684bd5=function(t){const e=s(t).value;return u(e)},n.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return u(Symbol.iterator)},n.wbg.__wbg_get_97b561fb56f034b5=function(){return $(function(t,e){const _=Reflect.get(s(t),s(e));return u(_)},arguments)},n.wbg.__wbg_call_cb65541d95d71282=function(){return $(function(t,e){const _=s(t).call(s(e));return u(_)},arguments)},n.wbg.__wbg_new_b51585de1b234aff=function(){const t=new Object;return u(t)},n.wbg.__wbg_self_1ff1d729e9aae938=function(){return $(function(){const t=self.self;return u(t)},arguments)},n.wbg.__wbg_window_5f4faef6c12b79ec=function(){return $(function(){const t=window.window;return u(t)},arguments)},n.wbg.__wbg_globalThis_1d39714405582d3c=function(){return $(function(){const t=globalThis.globalThis;return u(t)},arguments)},n.wbg.__wbg_global_651f05c6a0944d1c=function(){return $(function(){const t=global.global;return u(t)},arguments)},n.wbg.__wbg_set_502d29070ea18557=function(t,e,_){s(t)[e>>>0]=m(_)},n.wbg.__wbg_isArray_4c24b343cb13cfb1=function(t){return Array.isArray(s(t))},n.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(t){let e;try{e=s(t)instanceof ArrayBuffer}catch{e=!1}return e},n.wbg.__wbg_set_bedc3d02d0f05eb0=function(t,e,_){const r=s(t).set(s(e),s(_));return u(r)},n.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(t){return Number.isSafeInteger(s(t))},n.wbg.__wbg_entries_e51f29c7bba0c054=function(t){const e=Object.entries(s(t));return u(e)},n.wbg.__wbg_buffer_085ec1f694018c4f=function(t){const e=s(t).buffer;return u(e)},n.wbg.__wbg_new_8125e318e6245eed=function(t){const e=new Uint8Array(s(t));return u(e)},n.wbg.__wbg_set_5cf90238115182c3=function(t,e,_){s(t).set(s(e),_>>>0)},n.wbg.__wbg_length_72e2208bbc0efc61=function(t){return s(t).length},n.wbg.__wbg_newwithbyteoffsetandlength_69193e31c844b792=function(t,e,_){const r=new Float32Array(s(t),e>>>0,_>>>0);return u(r)},n.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(t){let e;try{e=s(t)instanceof Uint8Array}catch{e=!1}return e},n.wbg.__wbindgen_bigint_get_as_i64=function(t,e){const _=s(e),r=typeof _=="bigint"?_:void 0;ce()[t/8+1]=k(r)?BigInt(0):r,g()[t/4+0]=!k(r)},n.wbg.__wbindgen_debug_string=function(t,e){const _=ft(s(e)),r=R(_,c.__wbindgen_malloc,c.__wbindgen_realloc),o=j;g()[t/4+1]=o,g()[t/4+0]=r},n.wbg.__wbindgen_throw=function(t,e){throw new Error(x(t,e))},n.wbg.__wbindgen_memory=function(){const t=c.memory;return u(t)},n}function de(n,t){return c=n.exports,dt.__wbindgen_wasm_module=t,V=null,N=null,F=null,W=null,q=null,c.__wbindgen_start(),c}async function dt(n){if(c!==void 0)return c;typeof n>"u"&&(n=new URL(""+new URL("../assets/engine_bg.3a44958e.wasm",import.meta.url).href,self.location));const t=we();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:_}=await fe(await n,t);return de(e,_)}let w;const Bt=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Bt.decode();let K=null;function pe(){return(K===null||K.byteLength===0)&&(K=new Uint8Array(w.memory.buffer)),K}function he(n,t){return n=n>>>0,Bt.decode(pe().subarray(n,n+t))}function G(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}class B{static __wrap(t){t=t>>>0;const e=Object.create(B.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();w.__wbg_canvasdisplay_free(t)}get position(){const t=w.__wbg_get_canvasdisplay_position(this.__wbg_ptr);return tt.__wrap(t)}set position(t){G(t,tt);var e=t.__destroy_into_raw();w.__wbg_set_canvasdisplay_position(this.__wbg_ptr,e)}get scale(){return w.__wbg_get_canvasdisplay_scale(this.__wbg_ptr)}set scale(t){w.__wbg_set_canvasdisplay_scale(this.__wbg_ptr,t)}get img_size(){const t=w.__wbg_get_canvasdisplay_img_size(this.__wbg_ptr);return U.__wrap(t)}set img_size(t){G(t,U);var e=t.__destroy_into_raw();w.__wbg_set_canvasdisplay_img_size(this.__wbg_ptr,e)}get canvas_size(){const t=w.__wbg_get_canvasdisplay_canvas_size(this.__wbg_ptr);return U.__wrap(t)}set canvas_size(t){G(t,U);var e=t.__destroy_into_raw();w.__wbg_set_canvasdisplay_canvas_size(this.__wbg_ptr,e)}get gap(){return w.__wbg_get_canvasdisplay_gap(this.__wbg_ptr)>>>0}set gap(t){w.__wbg_set_canvasdisplay_gap(this.__wbg_ptr,t)}constructor(t,e,_,r,o){const i=w.canvasdisplay_constructor(t,e,_,r,o);return B.__wrap(i)}static initial(t,e,_){G(t,U);var r=t.__destroy_into_raw();G(e,U);var o=e.__destroy_into_raw();const i=w.canvasdisplay_initial(r,o,_);return B.__wrap(i)}center(){w.canvasdisplay_center(this.__wbg_ptr)}set_img_size(t,e){w.canvasdisplay_set_img_size(this.__wbg_ptr,t,e)}set_canvas_size(t,e){w.canvasdisplay_set_canvas_size(this.__wbg_ptr,t,e)}translate_position(t,e){const _=w.canvasdisplay_translate_position(this.__wbg_ptr,t,e);return pt.__wrap(_)}zoom_at_position(t,e,_){w.canvasdisplay_zoom_at_position(this.__wbg_ptr,t,e,_)}move_relative(t,e){w.canvasdisplay_move_relative(this.__wbg_ptr,t,e)}}class pt{static __wrap(t){t=t>>>0;const e=Object.create(pt.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();w.__wbg_coordinate_free(t)}get 0(){return w.__wbg_get_coordinate_0(this.__wbg_ptr)}set 0(t){w.__wbg_set_coordinate_0(this.__wbg_ptr,t)}get 1(){return w.__wbg_get_canvasdisplay_scale(this.__wbg_ptr)}set 1(t){w.__wbg_set_canvasdisplay_scale(this.__wbg_ptr,t)}}class tt{static __wrap(t){t=t>>>0;const e=Object.create(tt.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();w.__wbg_position_free(t)}get x(){return w.__wbg_get_position_x(this.__wbg_ptr)}set x(t){w.__wbg_set_position_x(this.__wbg_ptr,t)}get y(){return w.__wbg_get_position_y(this.__wbg_ptr)}set y(t){w.__wbg_set_position_y(this.__wbg_ptr,t)}}class U{static __wrap(t){t=t>>>0;const e=Object.create(U.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();w.__wbg_size_free(t)}get width(){return w.__wbg_get_size_width(this.__wbg_ptr)>>>0}set width(t){w.__wbg_set_size_width(this.__wbg_ptr,t)}get height(){return w.__wbg_get_size_height(this.__wbg_ptr)>>>0}set height(t){w.__wbg_set_size_height(this.__wbg_ptr,t)}}async function ye(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(_){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function me(){const n={};return n.wbg={},n.wbg.__wbindgen_throw=function(t,e){throw new Error(he(t,e))},n}function ve(n,t){return w=n.exports,ht.__wbindgen_wasm_module=t,K=null,w}async function ht(n){if(w!==void 0)return w;typeof n>"u"&&(n=new URL(""+new URL("../assets/common_ui_bg.cc12e8b8.wasm",import.meta.url).href,self.location));const t=me();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:_}=await ye(await n,t);return ve(e,_)}Et=(n=>(n.Alpha="alpha",n.Remove="remove",n.Darken="darken",n.Lighten="lighten",n.Screen="screen",n))(Et||{}),$t=(n=>(n.Brush="brush",n.Eraser="eraser",n.Move="move",n))($t||{}),xt=(n=>(n.Selected="selected",n.Clicked="clicked",n))(xt||{}),gt=h(),bt=h(!0),X=h("brush"),ct=h(30),Dt=h("alpha"),It=h("#ff0000"),ne=h("#fee000"),st=h(.5),at=h(5),lt=h("clicked"),Lt=h(255),Tt=h(void 0),St=h(void 0),S=h([]),zt=h(0),ee=h(null),jt=h(!1),Ut=h(!1),ut=h("");async function ke(){let n,t,e,_,r=!1,o=[],i;function b(){ut.set(n.blender),Tt.set(n.content),St.set(n.history),zt.set(n.current),Ut.set(n.redoable),jt.set(n.undoable);for(const a of o)a()}return{init:async function(a,l){await ht(),t=await dt(),e=a,_=l,n=new O(a,l),n.perform_step({type:"layer/create/empty",color:"#ffffffff"}),n.perform_step({type:"layer/create/empty"});let f=n.context_idx;f&&S.set([f]),gt.set(new B(a,l,100,100,10)),b()},from_history:async function(a,l){await ht(),t=await dt(),n=O.reconstruct(a,l),e=n.size.width,_=n.size.height,gt.set(new B(e,_,100,100,10)),b()},switch_blender:function(a){n.switch_blender(a),ut.set(n.blender)},add_redraw_callback:function(a){o.push(a)},move_layer_up:function(a){n.move_layer_up(a),b()},move_layer_down:function(a){n.move_layer_down(a),b()},perform_step:function(a){n.perform_step(a);let l=n.context_idx;l&&S.set([l]),b()},get_content_of:function(a,l,f){return new Uint8ClampedArray(t.memory.buffer,a,4*l*f)},content_as_bytes:function(){return new Uint8ClampedArray(t.memory.buffer,n.pointer,4*e*_)},start:function(a,l){if(y(S).length!==1&&!(y(X)==="move"&&y(lt)==="clicked"))return;let f;switch(y(X)){case"brush":f={type:"draw/line",id:y(S)[0],color:y(It)+y(Lt).toString(16).padStart(2,"0"),radius:y(ct),mode:y(Dt),hardness:y(st),distance:y(at),track:[]};break;case"eraser":f={type:"draw/line",id:y(S)[0],color:"#000000ff",radius:y(ct),mode:"remove",hardness:y(st),distance:y(at),track:[]};break;case"move":let v=y(S)[0];if(y(lt)==="clicked"){if(i=y(S),v=n.get_first_hit(a,l)||v,!v)return;S.set([v])}f={type:"layer/move_relative",id:v,delta:[0,0]};break}n.start_step(f),r=!0},extend:function(a,l,f,v){r&&(y(X)==="move"&&(a=Math.ceil(a-f),l=Math.ceil(l-v)),n.extend_step(a,l))},finish:function(){r&&(n.finish_step(),r=!1,i&&(S.set(i),i=void 0),b())},undo:function(){n.undo(),b()},redo:function(){n.redo(),b()}}}Yt=await ke();function xe(n){let t,e;return{c(){t=A("div"),e=A("div"),this.h()},l(_){t=z(_,"DIV",{class:!0});var r=D(t);e=z(r,"DIV",{class:!0}),D(e).forEach(p),r.forEach(p),this.h()},h(){d(e,"class","skeleton-loader svelte-ahzrps"),d(t,"class","skeleton-box svelte-ahzrps")},m(_,r){E(_,t,r),et(t,e)},p:C,i:C,o:C,d(_){_&&p(t)}}}it=class extends H{constructor(n){super(),J(this,n,null,xe,Z,{})}};function $e(n){let t,e,_,r;const o=n[5].default,i=yt(o,n,n[4],null);return{c(){t=A("button"),i&&i.c(),this.h()},l(b){t=z(b,"BUTTON",{type:!0,class:!0,title:!0,style:!0});var a=D(t);i&&i.l(a),a.forEach(p),this.h()},h(){d(t,"type","button"),d(t,"class","btn svelte-g4d5l0"),d(t,"title",n[1]),t.disabled=n[0],d(t,"style",n[2])},m(b,a){E(b,t,a),i&&i.m(t,null),e=!0,_||(r=Nt(t,"click",n[6]),_=!0)},p(b,a){i&&i.p&&(!e||a&16)&&mt(i,o,b,b[4],e?kt(o,b[4],a,null):vt(b[4]),null),(!e||a&2)&&d(t,"title",b[1]),(!e||a&1)&&(t.disabled=b[0]),(!e||a&4)&&d(t,"style",b[2])},i(b){e||(I(i,b),e=!0)},o(b){L(i,b),e=!1},d(b){b&&p(t),i&&i.d(b),_=!1,r()}}}function Ae(n){let t,e,_;return e=new it({}),{c(){t=A("div"),Vt(e.$$.fragment),this.h()},l(r){t=z(r,"DIV",{class:!0});var o=D(t);qt(e.$$.fragment,o),o.forEach(p),this.h()},h(){d(t,"class","btn skeleton svelte-g4d5l0")},m(r,o){E(r,t,o),Kt(e,t,null),_=!0},p:C,i(r){_||(I(e.$$.fragment,r),_=!0)},o(r){L(e.$$.fragment,r),_=!1},d(r){r&&p(t),Gt(e)}}}function ze(n){let t,e,_,r;const o=[Ae,$e],i=[];function b(a,l){return a[3]?0:1}return t=b(n),e=i[t]=o[t](n),{c(){e.c(),_=_t()},l(a){e.l(a),_=_t()},m(a,l){i[t].m(a,l),E(a,_,l),r=!0},p(a,[l]){let f=t;t=b(a),t===f?i[t].p(a,l):(Mt(),L(i[f],1,1,()=>{i[f]=null}),Ft(),e=i[t],e?e.p(a,l):(e=i[t]=o[t](a),e.c()),I(e,1),e.m(_.parentNode,_))},i(a){r||(I(e),r=!0)},o(a){L(e),r=!1},d(a){i[t].d(a),a&&p(_)}}}function Se(n,t,e){let _;nt(n,bt,f=>e(3,_=f));let{$$slots:r={},$$scope:o}=t,{disabled:i=!1}=t,{title:b=void 0}=t,{style:a=void 0}=t;function l(f){Be.call(this,n,f)}return n.$$set=f=>{"disabled"in f&&e(0,i=f.disabled),"title"in f&&e(1,b=f.title),"style"in f&&e(2,a=f.style),"$$scope"in f&&e(4,o=f.$$scope)},[i,b,a,_,o,r,l]}Jt=class extends H{constructor(n){super(),J(this,n,Se,ze,Z,{disabled:0,title:1,style:2})}};function Ee(n){let t,e;const _=n[1].default,r=yt(_,n,n[0],null);return{c(){t=A("div"),r&&r.c(),this.h()},l(o){t=z(o,"DIV",{class:!0});var i=D(t);r&&r.l(i),i.forEach(p),this.h()},h(){d(t,"class","card svelte-x7pym8")},m(o,i){E(o,t,i),r&&r.m(t,null),e=!0},p(o,[i]){r&&r.p&&(!e||i&1)&&mt(r,_,o,o[0],e?kt(_,o[0],i,null):vt(o[0]),null)},i(o){e||(I(r,o),e=!0)},o(o){L(r,o),e=!1},d(o){o&&p(t),r&&r.d(o)}}}function Te(n,t,e){let{$$slots:_={},$$scope:r}=t;return n.$$set=o=>{"$$scope"in o&&e(0,r=o.$$scope)},[r,_]}Qt=class extends H{constructor(n){super(),J(this,n,Te,Ee,Z,{})}};const Ie=(n,t)=>{let e;const _=()=>window.removeEventListener("keydown",e),r=()=>{_(),t&&(e=o=>{!!t.alt!=o.altKey||!!t.shift!=o.shiftKey||!!t.control!=(o.ctrlKey||o.metaKey)||t.code!=o.code||(o.preventDefault(),t.callback?t.callback():n.click())},window.addEventListener("keydown",e))};return r(),{update:r,destroy:_}};function Pt(n,t,e){const _=n.slice();return _[5]=t[e],_}function Le(n){let t,e,_;return e=new it({}),{c(){t=A("div"),Vt(e.$$.fragment),this.h()},l(r){t=z(r,"DIV",{class:!0});var o=D(t);qt(e.$$.fragment,o),o.forEach(p),this.h()},h(){d(t,"class","box skeleton svelte-zy5ee1")},m(r,o){E(r,t,o),Kt(e,t,null),_=!0},p:C,i(r){_||(I(e.$$.fragment,r),_=!0)},o(r){L(e.$$.fragment,r),_=!1},d(r){r&&p(t),Gt(e)}}}function De(n){let t,e=n[1],_=[];for(let r=0;r<e.length;r+=1)_[r]=Wt(Pt(n,e,r));return{c(){t=A("div");for(let r=0;r<_.length;r+=1)_[r].c();this.h()},l(r){t=z(r,"DIV",{class:!0});var o=D(t);for(let i=0;i<_.length;i+=1)_[i].l(o);o.forEach(p),this.h()},h(){d(t,"class","box svelte-zy5ee1")},m(r,o){E(r,t,o);for(let i=0;i<_.length;i+=1)_[i]&&_[i].m(t,null)},p(r,o){if(o&7){e=r[1];let i;for(i=0;i<e.length;i+=1){const b=Pt(r,e,i);_[i]?_[i].p(b,o):(_[i]=Wt(b),_[i].c(),_[i].m(t,null))}for(;i<_.length;i+=1)_[i].d(1);_.length=e.length}},i:C,o:C,d(r){r&&p(t),Pe(_,r)}}}function Wt(n){let t,e,_,r,o,i,b,a;function l(){return n[4](n[5])}return{c(){t=A("button"),e=A("i"),this.h()},l(f){t=z(f,"BUTTON",{class:!0,title:!0});var v=D(t);e=z(v,"I",{class:!0}),D(e).forEach(p),v.forEach(p),this.h()},h(){d(e,"class",_=rt("fa "+n[5].icon)+" svelte-zy5ee1"),d(t,"class",r=rt(n[0]==n[5].value?"selected-btn":"control-btn")+" svelte-zy5ee1"),d(t,"title",o=n[5].title)},m(f,v){E(f,t,v),et(t,e),b||(a=[We(i=Ie.call(null,t,n[5].shortcut)),Nt(t,"click",l)],b=!0)},p(f,v){n=f,v&2&&_!==(_=rt("fa "+n[5].icon)+" svelte-zy5ee1")&&d(e,"class",_),v&3&&r!==(r=rt(n[0]==n[5].value?"selected-btn":"control-btn")+" svelte-zy5ee1")&&d(t,"class",r),v&2&&o!==(o=n[5].title)&&d(t,"title",o),i&&Me(i.update)&&v&2&&i.update.call(null,n[5].shortcut)},d(f){f&&p(t),b=!1,Fe(a)}}}function je(n){let t,e,_,r;const o=[De,Le],i=[];function b(a,l){return a[3]?1:0}return t=b(n),e=i[t]=o[t](n),{c(){e.c(),_=_t()},l(a){e.l(a),_=_t()},m(a,l){i[t].m(a,l),E(a,_,l),r=!0},p(a,[l]){let f=t;t=b(a),t===f?i[t].p(a,l):(Mt(),L(i[f],1,1,()=>{i[f]=null}),Ft(),e=i[t],e?e.p(a,l):(e=i[t]=o[t](a),e.c()),I(e,1),e.m(_.parentNode,_))},i(a){r||(I(e),r=!0)},o(a){L(e),r=!1},d(a){i[t].d(a),a&&p(_)}}}function Ue(n,t,e){let _;nt(n,bt,a=>e(3,_=a));let{value:r}=t,{options:o}=t,{onChange:i}=t;const b=a=>i(a.value);return n.$$set=a=>{"value"in a&&e(0,r=a.value),"options"in a&&e(1,o=a.options),"onChange"in a&&e(2,i=a.onChange)},[r,o,i,_,b]}Zt=class extends H{constructor(n){super(),J(this,n,Ue,je,Z,{value:0,options:1,onChange:2})}}})();export{Jt as B,ot as C,xt as M,it as S,$t as T,Zt as V,Ne as __tla,Qt as a,Xt as b,Q as c,At as d,Yt as e,zt as f,S as g,St as h,te as i,ee as j,Et as k,Tt as l,It as m,st as n,Lt as o,at as p,Dt as q,ct as r,bt as s,X as t,gt as u,lt as v,ne as w,ut as x,jt as y,Ut as z};
