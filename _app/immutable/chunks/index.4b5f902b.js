import{D as r,s as h}from"./index.8285138c.js";const s=[];function p(n,u=r){let o;const c=new Set;function f(e){if(h(n,e)&&(n=e,o)){const i=!s.length;for(const t of c)t[1](),s.push(t,n);if(i){for(let t=0;t<s.length;t+=2)s[t][0](s[t+1]);s.length=0}}}function l(e){f(e(n))}function a(e,i=r){const t=[e,i];return c.add(t),c.size===1&&(o=u(f)||r),e(n),()=>{c.delete(t),c.size===0&&o&&(o(),o=null)}}return{set:f,update:l,subscribe:a}}export{p as w};
